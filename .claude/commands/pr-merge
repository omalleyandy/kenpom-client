---
description: Safely merge a pull request with pre-flight checks
allowed-tools: Bash(gh:*), Bash(git checkout:*), Bash(git pull:*)
argument-hint: <pr-number>
---

Merge pull request #$ARGUMENTS.

### 1. Pre-merge Checks (run in parallel)
```bash
gh pr view $ARGUMENTS --json state,mergeable,mergeStateStatus,reviewDecision
gh pr checks $ARGUMENTS
```

### 2. Verify Before Merge

Before merging, confirm:
- PR is approved (reviewDecision = APPROVED) or no reviews required
- All CI checks pass
- No merge conflicts (mergeable = MERGEABLE)

### 3. Merge Options

Ask the user which merge strategy to use:
- **Squash** (default): `gh pr merge $ARGUMENTS --squash`
- **Merge commit**: `gh pr merge $ARGUMENTS --merge`
- **Rebase**: `gh pr merge $ARGUMENTS --rebase`

### 4. Post-merge Cleanup

After successful merge:
```bash
git checkout main && git pull origin main
```

Optionally delete the local branch if it was merged.
